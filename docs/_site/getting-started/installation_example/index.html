<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/MALTS/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/MALTS/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/MALTS/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/MALTS/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Installation and Quickstart Example | AME Lab</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Installation and Quickstart Example" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Installation and Quickstart Example" /> <meta property="og:description" content="Installation and Quickstart Example" /> <link rel="canonical" href="http://localhost:4000/MALTS/getting-started/installation_example/" /> <meta property="og:url" content="http://localhost:4000/MALTS/getting-started/installation_example/" /> <meta property="og:site_name" content="AME Lab" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-12-15T05:35:43-05:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/MALTS/getting-started/installation_example/","datePublished":"2020-12-15T05:35:43-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/MALTS/getting-started/installation_example/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/MALTS/content/logos/logo.svg"}},"headline":"Installation and Quickstart Example","description":"Installation and Quickstart Example","dateModified":"2020-12-15T05:35:43-05:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/MALTS/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">MALTS</div> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/MALTS/" class="nav-list-link">Home</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/MALTS/getting-started" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/MALTS/getting-started/installation_example/" class="nav-list-link active">Installation and Quickstart Example</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/MALTS/FAQ" class="nav-list-link">FAQ and Vocabulary Guide</a></li></ul> </nav> <footer class="site-footer"> This package is created by the <a href="https://almost-matching-exactly.github.io">Almost Matching Exactly Lab</a>. Our site is based on the Jekyll theme <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AME Lab" aria-label="Search AME Lab" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/almost-matching-exactly" class="site-button" rel="noopener noreferrer" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/MALTS/getting-started">Getting Started</a></li> <li class="breadcrumb-nav-list-item"><span>Installation and Quickstart Example</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="installation-and-quickstart-example"> <a href="#installation-and-quickstart-example" class="anchor-heading" aria-labelledby="installation-and-quickstart-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation and Quickstart Example </h1> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#installation-and-quickstart-example" id="markdown-toc-installation-and-quickstart-example">Installation and Quickstart Example</a> <ol> <li><a href="#dependencies" id="markdown-toc-dependencies">Dependencies</a></li> <li><a href="#installation" id="markdown-toc-installation">Installation</a></li> <li><a href="#quickstart-example" id="markdown-toc-quickstart-example">Quickstart Example</a></li> <li><a href="#matched-groups" id="markdown-toc-matched-groups">Matched Groups</a></li> </ol> </li> </ol> </details> <h2 id="dependencies"> <a href="#dependencies" class="anchor-heading" aria-labelledby="dependencies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dependencies </h2> <p>This package requires prior installation of</p> <ul> <li>Python (&gt;= 3.0)</li> <li>NumPy (&gt;= 1.17.5)</li> <li>Scikit-Learn (&gt;= 0.22.1))</li> <li>Pandas (todo: check)</li> <li>Matplotlib</li> <li>Seaborn</li> </ul> <p>If your computer system does not have python 3.*, install from <a href="https://www.python.org/downloads/">here</a>.</p> <p>If your python version does not have the Pandas, Scikit learn, or Numpy packages, install from <a href="https://packaging.python.org/tutorials/installing-packages/">here</a></p> <h2 id="installation"> <a href="#installation" class="anchor-heading" aria-labelledby="installation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation </h2> <p>The MALTS Python Package is available for download on the <a href="https://github.com/almost-matching-exactly/MALTS">almost-matching-exactly Github</a> or via PyPi (recommended):</p> <figure class="highlight"><pre><code class="language-markdown" data-lang="markdown">pip install pymalts2</code></pre></figure> <h2 id="quickstart-example"> <a href="#quickstart-example" class="anchor-heading" aria-labelledby="quickstart-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quickstart Example </h2> <p>We show the working of the package. In this example, we provide only the basic inputs: (1) input data as a dataframe or file, (2) the name of the outcome column, and (3) the name of the treatment column. In order to set up the model for learning the distance metric, we consider:</p> <ol> <li>Variable name for the outcome variable: ‘outcome’.</li> <li>Variable name for the treatment variable: ‘treated’</li> <li>Data is assigned to python variable df</li> </ol> <div class="code-example"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">pymalts2</span> <span class="k">as</span> <span class="n">pymalts</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'example/example_data.csv'</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1">#&gt; (2500, 20)
#&gt;	    X1	        X2	        X3 	        X4	        X5	        X6	        X7	        X8	        X9	        X10  	           X11	            X12 	      X13	      X14	      X15	       X16	      X17	     X18	   outcome   	  treated
#&gt;1355	1.881335	1.684164	0.532332	2.002254	1.435032	1.450196	1.974763	1.321659	0.709443	-1.141244	0.883130	0.956721	2.498229	2.251677	0.375271	-0.545129	3.334220	0.081259	-15.679894	0
#&gt;1320	0.666476	1.263065	0.657558	0.498780	1.096135	1.002569	0.881916	0.740392	2.780857	-0.765889	1.230980	-1.214324	-0.040029	1.554477	4.235513	3.596213	0.959022	0.513409	-7.068587	0
#&gt;1233	-0.193200	0.961823	1.652723	1.117316	0.590318	0.566765	0.775715	0.938379	-2.055124	1.942873	-0.606074	3.329552	-1.822938	3.240945	2.106121	0.857190	0.577264	-2.370578	-5.133200	0
#&gt;706	1.378660	1.794625	0.701158	1.815518	1.129920	1.188477	0.845063	1.217270	5.847379	0.566517	-0.045607	0.736230	0.941677	0.835420	-0.560388	0.427255	2.239003	-0.632832	39.684984	1
#&gt;438	0.434297	0.296656	0.545785	0.110366	0.151758	-0.257326	0.601965	0.499884	-0.973684	-0.552586	-0.778477	0.936956	0.831105	2.060040	3.153799	0.027665	0.376857	-1.221457	-2.954324	0
</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">pymalts</span><span class="p">.</span><span class="n">malts_mf</span><span class="p">(</span> <span class="n">outcome</span><span class="o">=</span><span class="s">'outcome'</span><span class="p">,</span> <span class="n">treatment</span><span class="o">=</span><span class="s">'treated'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span> <span class="c1"># running MALTS with default setting
</span></code></pre></div> </div> </div> <h2 id="matched-groups"> <a href="#matched-groups" class="anchor-heading" aria-labelledby="matched-groups"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Matched Groups </h2> <p>Matched Group matrix (MG_matrix) is NxN matrix with each row corresponding to each query unit and each column corresponds to matched units. Cell (i,j) in the matrix corresponds to the weight of unit j in the matched group of unit i. The weight corresponds to the numbers of times a unit is included in a matched group across M-folds.</p> <p>The <code class="language-plaintext highlighter-rouge">CATE_df</code> dataframe in the model <code class="language-plaintext highlighter-rouge">m</code> gives us the CATE estimate for a corresponding unit in each row.</p> <div class="code-example"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">CATE_df</span><span class="p">)</span>
<span class="c1">#&gt;	avg.CATE	std.CATE	outcome	   treated
#&gt;0	47.232061	21.808950	-15.313091	0.0
#&gt;1	40.600643	21.958906	-16.963202	0.0
#&gt;2	40.877320	22.204570	9.527929	1.0
#&gt;3	37.768578	19.740320	-3.940218	0.0
#&gt;4	39.920257	21.744433	-8.011915	0.0
#&gt;...   	...    	...	    ...    	...
#&gt;2495	49.227788	21.581176	-14.529871	0.0
#&gt;2496	42.352355	21.385861	19.570055	1.0
#&gt;2497	43.737763	19.859275	-16.342666	0.0
#&gt;2498	41.189297	20.346711	-9.165242	0.0
#&gt;2499	45.427037	23.762884	-17.604829	0.0
</span>
<span class="n">ATE</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">CATE_df</span><span class="p">[</span><span class="s">'avg.CATE'</span><span class="p">].</span><span class="n">mean</span><span class="p">()</span>
<span class="k">print</span> <span class="p">(</span><span class="n">ATE</span><span class="p">)</span>
<span class="c1">#&gt;42.29673993471417
</span></code></pre></div> </div> </div> </div> </div> <div class="search-overlay"></div> </div> </body> </html> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
